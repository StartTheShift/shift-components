{"version":3,"sources":["shift-components.js"],"names":["angular","module","directive","restrict","templateUrl","require","scope","date","change","validator","highlight","allowNull","link","buildCalendarScope","isValidDate","updateDate","goToNextMonth","showing_date","add","goToPreviousMonth","subtract","goToSelectedDate","moment","selectDate","$event","target","getAttribute","setNull","isMoment","isValid","$watch","new_value","old_value","getClass","ref","active","isSame","off","available","invalid","day_of_the_month","day_of_the_week","end_date","results","week","startOf","endOf","set","get","weeks","day","length","push","iso_8061","format","run","$templateCache","put","$compile","transclude","element","attrs","controllers","container","floating_container","hideOnClickOut","hideOnEscape","is_visible","offset","onDestroy","parseInt","parent","$eval","parentNode","document","createElement","addClass","position","css","visibility","top","left","attr","fixed","show","event","container_element","$","attachTo","empty","append","$apply","setTimeout","container_height","container_width","popover_height","popover_width","outerHeight","outerWidth","marginLeft","marginTop","hide","scrollSelector","closest","removeEventListener","monitorScroll","remove","which","trigger","addEventListener","$on","$http","default_template","compile","template","parent_node","shift_floating","title","shiftPopoverTitle","text","shiftPopover","shiftPopoverattachTo","shiftPopoverPosition","shiftPopoverTrigger","html","shiftPopoverTemplateUrl","cache","then","response","data","shiftPopoverTemplate","options","option","onSelect","onDiscard","placeholder","ctrl","onDocumentClick","onKeyup","shift_selected","shift_selected_scope","shift_selector","shift_selector_scope","show_select","ng-show","class","width","visible","on-select","on-discard","$new","clone","children","_onDiscard","discarded","_onSelect","selected","indexOf","item","i","l","this","DOWN_KEY","ENTER_KEY","UP_KEY","autoScroll","isSelected","onKeyDown","previous_client_y","select_container","startListening","stopListening","ng-if","ng-repeat","ng-class","ng-click","ng-mouseenter","multiple","key_code","keyCode","toggle","Math","max","min","preventDefault","stopPropagation","container_elt","container_pos","margin","option_elt","option_pos","option_style","getBoundingClientRect","getComputedStyle","bottom","marginBottom","scrollTop","call","index","discard","select","_","pull","setPosition","$index","clientY","service","namespaces","register","namespace","shiftSortableService","shiftSortable","shiftSortableChange","shiftSortableAdd","shiftSortableRemove","shiftSortableHandle","shiftSortableNamespace","dragging","getElementAt","grab","hovered_element","isBefore","isInside","last_element","move","movePlaceholder","release","sortables","start_position","className","x","y","coord","last","len","rectange","rel_x","rel_y","window","scrollLeft","height","right","matches","style","clientWidth","clientHeight","minWidth","minHeight","insertBefore","body","appendChild","sortable","pageX","pageY","elt","container_changed","drop_container","end_position","position_changed","record","removeClass","removeChild","splice","$timeout","time","ngModel","guessTime","time_str","hour","minute","time_re","time_tuple","exec","toLowerCase","$formatters","value","$parsers","new_date","on","$filter","source","filterAttribute","onOptionSelect","onOptionDeselect","show_options_on_focus","show_select_menu","close_menu_on_esc","filterOptions","mouse_down","onKeyUp","onMouseDown","select_menu","shift_select_scope","onSelectMultiOption","onDeselectMultiOption","ng-mousedown","ng-mouseup","multiselect","filter","query","slice","mouseDown","is_down","onFocus","key","has"],"mappings":"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","file":"shift-components.min.js","sourcesContent":["\n/**\nUI components for SHIFT applications\n\n@requires momentJS\n@requires lodash\n@requires jQuery\n@requires shift.components.sortable\n@requires shift.components.calendar\n@requires shift.components.select\n@requires shift.components.typeahead\n@requires shift.components.popover\n@requires shift.components.select\n@requires shift.components.time\n@requires shift.components.floating\n@requires shift.components.tooltip\n\n@module shift.components\n\n@link sortable/\n */\nangular.module('shift.components', ['shift.components.sortable', 'shift.components.calendar', 'shift.components.selector', 'shift.components.typeahead', 'shift.components.popover', 'shift.components.select', 'shift.components.time', 'shift.components.floating', 'shift.components.tooltip']);\n\n\n/**\nCalendar directive displays the date and changes it on click.\n\nNote that moment(moment_object) is heavily used to clone a date instead of\njust passing the reference (since date is a moment object). It allows simpler\ndate handeling without the the risk of impacting associated dates.\n\n@module shift.components.calendar\n\n@requires momentJS\n@requires lodash\n\n@param {moment} date A moment object, default to now\n@param {function} change Called when date is changed\n@param {function} validator Method returning a Boolean indicating if\nthe selected date is valid or not\n@param {function} highlight Method returning a Boolean to highlight\na days on the calendar.\n@param {Boolean} allowNull Indicate if the date can be set to null\n\n@example\n```jade\nshift-calendar(\n  ng-model = \"date\"\n  change = \"onDateChange(date)\"\n  validator = \"isValidDate\"\n  highlight = \"isSpecialDay\"\n  allow-null = \"true\"\n)\n```\n */\nangular.module('shift.components.calendar', []).directive('shiftCalendar', function() {\n  return {\n    restrict: 'E',\n    templateUrl: 'calendar/calendar.html',\n    require: 'ngModel',\n    scope: {\n      date: '=ngModel',\n      change: '&',\n      validator: '=',\n      highlight: '=',\n      allowNull: '='\n    },\n    link: function(scope) {\n      var buildCalendarScope, isValidDate, updateDate;\n      scope.goToNextMonth = function() {\n        scope.showing_date.add(1, 'month');\n        return buildCalendarScope();\n      };\n      scope.goToPreviousMonth = function() {\n        scope.showing_date.subtract(1, 'month');\n        return buildCalendarScope();\n      };\n      scope.goToSelectedDate = function() {\n        scope.showing_date = moment(scope.date);\n        return buildCalendarScope();\n      };\n      scope.selectDate = function($event) {\n        var date;\n        date = moment($event.target.getAttribute('data-iso'));\n        if (!isValidDate(date)) {\n          return;\n        }\n        return updateDate(date);\n      };\n      scope.setNull = function() {\n        if (!scope.allowNull) {\n          return;\n        }\n        scope.date = null;\n        buildCalendarScope();\n        return scope.change();\n      };\n      isValidDate = function(date) {\n        if (!(moment.isMoment(date) && date.isValid())) {\n          return false;\n        }\n        if (scope.validator != null) {\n          return scope.validator(date);\n        }\n        return true;\n      };\n      updateDate = function(date) {\n        scope.date = date;\n        scope.showing_date = moment(date || void 0);\n        buildCalendarScope();\n        return scope.change();\n      };\n      scope.$watch('date', function(new_value, old_value) {\n        if (new_value === old_value) {\n          return;\n        }\n        return updateDate(new_value);\n      });\n      scope.getClass = function(date) {\n        var ref;\n        return {\n          active: (ref = scope.date) != null ? ref.isSame(date, 'day') : void 0,\n          off: !scope.showing_date.isSame(date, 'month'),\n          available: isValidDate(date),\n          invalid: !isValidDate(date),\n          highlight: typeof scope.highlight === \"function\" ? scope.highlight(date) : void 0\n        };\n      };\n      (buildCalendarScope = function() {\n        var date, day_of_the_month, day_of_the_week, end_date, ref, results, week;\n        date = moment(scope.showing_date).startOf('month').startOf('week');\n        end_date = moment(scope.showing_date).endOf('month').endOf('week');\n        if ((ref = scope.date) != null ? typeof ref.isValid === \"function\" ? ref.isValid() : void 0 : void 0) {\n          date.set('hour', scope.date.get('hour'));\n          date.set('minute', scope.date.get('minute'));\n          date.set('second', scope.date.get('second'));\n        }\n        scope.weeks = [];\n        results = [];\n        while (true) {\n          day_of_the_week = date.day();\n          day_of_the_month = date.date();\n          if (day_of_the_week === 0) {\n            if (scope.weeks.length > 5) {\n              break;\n            }\n            week = [];\n            scope.weeks.push(week);\n          }\n          week.push({\n            iso_8061: date.format(),\n            day_of_the_month: day_of_the_month,\n            date: moment(date)\n          });\n          results.push(date.add(1, 'day'));\n        }\n        return results;\n      })();\n      if (!scope.allowNull && !moment.isMoment(scope.date)) {\n        scope.date = moment();\n      }\n      if (moment.isMoment(scope.date)) {\n        updateDate(scope.date);\n        return scope.showing_date = moment(scope.date);\n      } else {\n        return scope.showing_date = moment().startOf('day');\n      }\n    }\n  };\n});\n\n'use strict';\n\nangular.module('shift.components.calendar').run(['$templateCache', function($templateCache) {\n\n  $templateCache.put('calendar/calendar.html', '<div class=\"calendar\"><table class=\"table-condensed\"><thead><tr><th title=\"previous month\" ng-click=\"goToPreviousMonth()\"><i class=\"fa fa-chevron-left\"></i></th><th><i ng-if=\"date\" title=\"go to {{ date.format(\\'MMMM Do, YYYY\\') }}\" ng-hide=\"showing_date.isSame(date, \\'month\\')\" ng-click=\"goToSelectedDate()\" class=\"fa fa-dot-circle-o\"></i></th><th colspan=\"3\" class=\"month\">{{ showing_date.format(\\'MMM YYYY\\') }}</th><th><i title=\"Unset date\" ng-click=\"setNull()\" ng-if=\"date &amp;&amp; dateAllowNull\" class=\"fa fa-times\"></i></th><th title=\"next month\" ng-click=\"goToNextMonth()\"><i class=\"fa fa-chevron-right\"></i></th></tr><tr><th>Su</th><th>Mo</th><th>Tu</th><th>We</th><th>Th</th><th>Fr</th><th>Sa</th></tr></thead><tbody ng-click=\"selectDate($event)\"><tr ng-repeat=\"week in weeks track by $index\"><td ng-repeat=\"day in week track by $index\" ng-class=\"getClass(day.date)\" data-iso=\"{{ day.iso_8061 }}\">{{ day.day_of_the_month }}</td></tr></tbody></table></div>');\n\n}]);\n\n/**\nFloating element directive displays template content on custom action\nexecuted on the parent element.\n\n@module shift.components.floating\n\n@param {string} trigger The event trigger type click, hover or focus\n@param {string} position The positioning of the element relative to its parent\n@param {string} fixed if provided, the floating element will be fixed positioned\n@param {number} offset margin from the parent element\n@param {element} parent Parent object relative to\n@param {string} attachTo Optional css selector of the scrollable element\ncontaining the element. default to \"body\", the selector will be matched\nagainst the parent of the container.\n\n@example\n```jade\nshift-floating(\n  trigger = \"click|hover|focus\"\n  position = \"top|bottom|left|right\"\n  parent = \"\"\n  offset = \"5\"\n  attach-to = \".css-seletor\"\n  fixed\n)\n```\n */\nangular.module('shift.components.floating', []).directive('shiftFloating', ['$compile', function($compile) {\n  return {\n    restrict: 'E',\n    transclude: true,\n    scope: true,\n    link: function(scope, element, attrs, controllers, transclude) {\n      var container, floating_container, hideOnClickOut, hideOnEscape, is_visible, offset, onDestroy;\n      is_visible = false;\n      onDestroy = null;\n      offset = parseInt(attrs.offset, 10) || 0;\n      container = (attrs.parent && scope.$eval(attrs.parent)) || element[0].parentNode;\n      floating_container = angular.element(document.createElement('div'));\n      floating_container.addClass(\"floating-container floating-\" + (attrs.position || 'left'));\n      floating_container.css({\n        visibility: 'hidden',\n        top: 0,\n        left: 0\n      });\n      if ('fixed' in attrs) {\n        floating_container.attr({\n          fixed: true\n        });\n      }\n      scope.show = function(event) {\n        var container_element;\n        if (is_visible) {\n          return;\n        }\n        is_visible = true;\n        container_element = $(attrs.attachTo || \"body\");\n        floating_container.empty();\n        floating_container.append(transclude());\n        scope.$apply(function() {\n          container_element.append(floating_container);\n          return $compile(floating_container)(scope);\n        });\n        return setTimeout(function() {\n          var container_height, container_width, popover_height, popover_width;\n          $(floating_container).offset($(container).offset());\n          popover_height = $(floating_container[0]).outerHeight();\n          popover_width = $(floating_container[0]).outerWidth();\n          container_height = $(container).outerHeight();\n          container_width = $(container).outerWidth();\n          switch (attrs.position) {\n            case 'top':\n              return floating_container.css({\n                marginLeft: (container_width / 2 - popover_width / 2) + \"px\",\n                marginTop: \"-\" + (popover_height + offset) + \"px\",\n                visibility: ''\n              });\n            case 'bottom':\n              return floating_container.css({\n                marginLeft: (container_width / 2 - popover_width / 2) + \"px\",\n                marginTop: (container_height + offset) + \"px\",\n                visibility: ''\n              });\n            case 'right':\n              return floating_container.css({\n                marginLeft: (container_width + offset) + \"px\",\n                marginTop: (container_height / 2 - popover_height / 2) + \"px\",\n                visibility: ''\n              });\n            default:\n              return floating_container.css({\n                marginLeft: \"-\" + (popover_width + offset) + \"px\",\n                marginTop: (container_height / 2 - popover_height / 2) + \"px\",\n                visibility: ''\n              });\n          }\n        });\n      };\n      scope.hide = function() {\n        if (!is_visible) {\n          return;\n        }\n        if (scope.scrollSelector) {\n          container.closest(scope.scrollSelector).removeEventListener('scroll', monitorScroll);\n        }\n        floating_container.remove();\n        floating_container.css({\n          marginLeft: '',\n          marginTop: '',\n          visibility: 'hidden'\n        });\n        return is_visible = false;\n      };\n\n      /*\n      Event triggering a hide after the click event\n       */\n      hideOnClickOut = function(event) {\n        var target;\n        target = event.target;\n        while (target) {\n          if (target === floating_container[0] || target === container) {\n            return;\n          }\n          target = target.parentNode;\n        }\n        return scope.hide();\n      };\n      hideOnEscape = function(event) {\n        if (event.which === 27) {\n          return scope.$apply(scope.hide);\n        }\n      };\n\n      /*\n      Triggers\n       */\n      switch (attrs.trigger) {\n        case 'hover':\n          container.addEventListener('mouseenter', scope.show);\n          container.addEventListener('mouseout', scope.hide);\n          onDestroy = function() {\n            container.removeEventListener('mouseenter', scope.show);\n            return container.removeEventListener('mouseout', scope.hide);\n          };\n          break;\n        case 'focus':\n          container.addEventListener('focus', scope.show);\n          container.addEventListener('blur', scope.hide);\n          onDestroy = function() {\n            container.removeEventListener('focus', scope.show);\n            return container.removeEventListener('blur', scope.hide);\n          };\n          break;\n        default:\n          container.addEventListener('click', scope.show);\n          document.addEventListener('click', hideOnClickOut);\n          document.addEventListener('keyup', hideOnEscape);\n          onDestroy = function() {\n            container.removeEventListener('click', scope.show);\n            document.removeEventListener('click', hideOnClickOut);\n            return document.addEventListener('keyup', hideOnEscape);\n          };\n      }\n      return scope.$on('$destroy', onDestroy);\n    }\n  };\n}]);\n\n\n/**\nPopover directive displays transcluded content on custom action\nexecuted on the parent element.\n\n@module shift.components.popover\n\n@param {string} shiftPopover the text of the popover\n@param {string} shiftPopoverTitle (optional) The title of the popover\n@param {string} shiftPopoverTrigger What triggers the popover ? click, hover\nor focus.\n@param {string} shiftPopoverPosition Default to 'bottom', can also be set to\nleft, right and top.\n@param {string} shiftPopoverTemplateUrl the template URL for rendering. When\nprovided, the text and title attribute are ignored.\n@param {attribute} fixed Use fixed positioning for the the tooltip. To be set\nwhen the trigger object is also fixed positioned.\n@param {string} shiftPopoverAttachTo a CSS selector where to put the popover\nelement. Useful when the popover is appearing in a scrollable area.\n\n@example\n```jade\ninput(\n  type = \"text\"\n  ng-model = \"foo\"\n  shift-popover = \"lorem ipsum\"\n  shift-popover-title = \"date\"\n  shift-popover-trigger = \"click|hover|focus\"\n  shift-popover-position = \"top|bottom|left|right\"\n  shift-popover-template-url = \"xyz.html\"\n  shift-popover-attach-to = \".scrollable.classname\"\n  fixed\n)\n```\n */\nangular.module('shift.components.popover', []).directive('shiftPopover', ['$http', '$compile', '$templateCache', function($http, $compile, $templateCache) {\n  var default_template;\n  default_template = '<div class=\"popover-container\">\\n  <h3\\n    ng-if = \"title\"\\n    class = \"popover-title\">{{ title }}</h3>\\n  <p>{{ text }}</p>\\n</div>';\n  return {\n\n    /*\n     * Directive definition object\n     */\n    restrict: 'A',\n    scope: true,\n    link: function(scope, element, attrs, controllers, transclude) {\n      var compile, template;\n      scope.parent_node = element[0];\n      template = default_template;\n      compile = function() {\n        var shift_floating;\n        shift_floating = angular.element('<shift-floating />');\n        scope.title = attrs.shiftPopoverTitle;\n        scope.text = attrs.shiftPopover;\n        shift_floating.attr({\n          parent: 'parent_node',\n          attachTo: attrs.shiftPopoverattachTo,\n          position: attrs.shiftPopoverPosition || 'bottom',\n          trigger: attrs.shiftPopoverTrigger || 'click',\n          offset: \"5\"\n        });\n        if (attrs.fixed) {\n          shift_floating.attr({\n            fixed: true\n          });\n        }\n        shift_floating.html(template);\n        $('body').append($compile(shift_floating)(scope));\n        return void 0;\n      };\n      if (attrs.shiftPopoverTemplateUrl) {\n        return $http.get(attrs.shiftPopoverTemplateUrl, {\n          cache: $templateCache\n        }).then(function(response) {\n          template = \"<div class=\\\"popover-container\\\">\" + response.data + \"</div>\";\n          return compile();\n        });\n      } else if (attrs.shiftPopoverTemplate) {\n        template = \"<div class=\\\"popover-container\\\">\" + attrs.shiftPopoverTemplate + \"</div>\";\n        return compile();\n      } else {\n        compile();\n        scope.$watch(attrs.title, function(new_value, old_value) {\n          if (new_value === old_value) {\n            return;\n          }\n          return compile();\n        });\n        return scope.$watch(attrs.text, function(new_value, old_value) {\n          if (new_value === old_value) {\n            return;\n          }\n          return compile();\n        });\n      }\n    }\n  };\n}]);\n\n\n/**\nA directive to mimic HTML select but awesome.\n\n@module shift.components.select\n\n@param {array} options Options to be displayed and to choose from\n@param {object} option Option selected\n@param {function} onSelect Callback triggered when an option has been selected\n@param {function} onDiscard Callback triggered when an option has been de-selected\n@param {string} placeholder Text to display when no option are selected\n\n@example\n```jade\n  shift-select(\n    options = \"options\"\n    option = \"selected_option\"\n    on-select = \"onSelect(selected)\"\n    on-discard = \"onDiscard(discarded)\"\n    placeholder = \"Click to make a selection...\"\n  )\n    strong {{option.city}}, {{ option.state }}\n    div\n      i pop. {{option.population}}\n```\n */\nangular.module('shift.components.select', ['shift.components.selector']).directive('shiftSelect', ['$compile', function($compile) {\n  return {\n    restrict: 'E',\n    transclude: true,\n    templateUrl: 'select/select.html',\n    scope: {\n      options: '=',\n      option: '=',\n      onSelect: '&',\n      onDiscard: '&',\n      placeholder: '@'\n    },\n    link: function(scope, element, attrs, ctrl, transclude) {\n      var onDocumentClick, onKeyup, shift_selected, shift_selected_scope, shift_selector, shift_selector_scope;\n      scope.show_select = false;\n      shift_selected = angular.element(document.createElement('div'));\n      shift_selected.attr({\n        'ng-show': 'option',\n        'class': 'select-option'\n      });\n      shift_selector = angular.element(document.createElement('shift-selector'));\n      shift_selector.css({\n        width: $(element[0].parentNode).outerWidth() + 'px'\n      });\n      shift_selector.attr({\n        'class': 'shift-selector',\n        'visible': 'show_select',\n        'options': 'options',\n        'on-select': '_onSelect(selected)',\n        'on-discard': '_onDiscard(discarded)'\n      });\n      shift_selector_scope = scope.$new();\n      shift_selected_scope = scope.$new();\n      transclude(shift_selector_scope, function(clone) {\n        return shift_selector.append(clone);\n      });\n      transclude(shift_selected_scope, function(clone) {\n        return shift_selected.append(clone);\n      });\n      element.children().append(shift_selected);\n      element.append(shift_selector);\n      $compile(shift_selector)(shift_selector_scope);\n      $compile(shift_selected)(shift_selected_scope);\n      scope._onDiscard = function(discarded) {\n        scope.show_select = false;\n        scope.option = null;\n        return scope.onDiscard({\n          discarded: discarded\n        });\n      };\n      scope._onSelect = function(selected) {\n        scope.onSelect({\n          selected: selected\n        });\n        scope.option = selected;\n        return scope.show_select = false;\n      };\n      scope.show = function() {\n        return scope.show_select = true;\n      };\n      onKeyup = function(event) {\n        if (event.which === 27) {\n          return scope.$apply(function() {\n            return scope.show_select = false;\n          });\n        }\n      };\n      onDocumentClick = function(event) {\n        var target;\n        target = event.target;\n        while (target != null ? target.parentNode : void 0) {\n          if (target === element[0]) {\n            return;\n          }\n          target = target.parentNode;\n        }\n        return scope.$apply(function() {\n          return scope.show_select = false;\n        });\n      };\n      document.addEventListener('click', onDocumentClick);\n      document.addEventListener('keyup', onKeyup);\n      return scope.$on('$destroy', function() {\n        document.removeEventListener('click', onDocumentClick);\n        return document.removeEventListener('keyup', onKeyup);\n      });\n    }\n  };\n}]);\n\n'use strict';\n\nangular.module('shift.components.select').run(['$templateCache', function($templateCache) {\n\n  $templateCache.put('select/select.html', '<div ng-click=\"show()\" class=\"select-container\"><div ng-if=\"!option\" class=\"select-option\">{{ placeholder }}</div></div>');\n\n}]);\n\n/**\nA directive that displays a list of option, navigation using arrow\nkeys + enter or mouse click.\n\nThe options are not displayed anymore if selected has a value or if\noptions is emtpy.\n\n@module shift.components.selector\n\n@param {array} options Options to be displayed and to choose from\n@param {object} selected Object selected from the options\n@param {function} onSelect Callback triggered when an option has been selected\n@param {function} onDiscard Callback triggered when an option has de-selected\n@param {boolean} multiple Indicates if the selection allows selection of more\nthan one option\n\n@example\n```jade\n  shift-selector(\n    options = \"options\"\n    selected = \"selected\"\n    on-select = \"onSelect(selected)\"\n    on-discard = \"onDiscard(discarded)\"\n    multiple\n  )\n    strong {{option.city}}\n    span &nbsp; {{option.state}}\n    div\n      i pop. {{option.population}}\n```\n */\nvar indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\nangular.module('shift.components.selector', []).directive('shiftSelector', ['$compile', function($compile) {\n  var DOWN_KEY, ENTER_KEY, UP_KEY;\n  UP_KEY = 38;\n  DOWN_KEY = 40;\n  ENTER_KEY = 13;\n  return {\n    restrict: 'E',\n    transclude: true,\n    scope: {\n      options: '=',\n      visible: '=',\n      selected: '=?',\n      onSelect: '&',\n      onDiscard: '&'\n    },\n    link: function(scope, element, attrs, ctrl, transclude) {\n      var autoScroll, isSelected, onKeyDown, option, previous_client_y, select_container, startListening, stopListening;\n      select_container = angular.element(document.createElement('ul'));\n      select_container.addClass('select-list');\n      select_container.attr({\n        'ng-if': 'visible && options.length'\n      });\n      option = angular.element(document.createElement('li'));\n      option.attr({\n        'ng-repeat': 'option in options',\n        'ng-class': 'getClass($index)',\n        'ng-click': 'toggle($index, $event)',\n        'ng-mouseenter': 'setPosition($index, $event)'\n      });\n      transclude(scope, function(clone, scope) {\n        return option.append(clone);\n      });\n      select_container.append(option);\n      element.append(select_container);\n      $compile(select_container)(scope);\n      $compile(option)(scope);\n      scope.position = -1;\n      if (attrs.multiple != null) {\n        if (scope.selected == null) {\n          scope.selected = [];\n        }\n      }\n      onKeyDown = function(event) {\n        var key_code, ref;\n        if (!(((ref = scope.options) != null ? ref.length : void 0) && scope.visible)) {\n          return;\n        }\n        key_code = event.which || event.keyCode;\n        if (key_code !== UP_KEY && key_code !== DOWN_KEY && key_code !== ENTER_KEY) {\n          return;\n        }\n        scope.$apply(function() {\n          switch (key_code) {\n            case UP_KEY:\n              scope.position -= 1;\n              break;\n            case DOWN_KEY:\n              scope.position += 1;\n              break;\n            default:\n              if (scope.position > -1) {\n                scope.toggle(scope.position, event);\n              }\n          }\n          scope.position = Math.max(0, scope.position);\n          scope.position = Math.min(scope.options.length - 1, scope.position);\n          return autoScroll();\n        });\n        event.preventDefault();\n        event.stopPropagation();\n        return false;\n      };\n      autoScroll = function() {\n        var container_elt, container_pos, margin, option_elt, option_pos, option_style;\n        container_elt = element[0].children[0];\n        option_elt = container_elt.children[scope.position];\n        option_pos = option_elt.getBoundingClientRect();\n        container_pos = container_elt.getBoundingClientRect();\n        option_style = getComputedStyle(option_elt);\n        if (option_pos.bottom > container_pos.bottom) {\n          margin = parseInt(option_style.marginBottom, 10);\n          container_elt.scrollTop += option_pos.bottom - container_pos.bottom + margin;\n        }\n        if (option_pos.top < container_pos.top) {\n          margin = parseInt(option_style.marginTop, 10);\n          return container_elt.scrollTop += option_pos.top - container_pos.top - margin;\n        }\n      };\n      isSelected = function(option) {\n        if (attrs.multiple != null) {\n          return indexOf.call(scope.selected, option) >= 0;\n        }\n        return option === scope.selected;\n      };\n      scope.toggle = function(index, event) {\n        event.stopPropagation();\n        option = scope.options[index];\n        if (isSelected(option)) {\n          scope.discard(index);\n        } else {\n          scope.select(index);\n        }\n        return false;\n      };\n      scope.select = function(index) {\n        var selected;\n        scope.position = index;\n        selected = scope.options[scope.position];\n        if (attrs.multiple != null) {\n          scope.selected.push(selected);\n        } else {\n          scope.selected = selected;\n        }\n        return scope.onSelect({\n          selected: selected\n        });\n      };\n      scope.discard = function(index) {\n        var discarded;\n        scope.position = index;\n        discarded = scope.options[scope.position];\n        if (attrs.multiple != null) {\n          _.pull(scope.selected, discarded);\n        } else {\n          scope.selected = null;\n        }\n        return scope.onDiscard({\n          discarded: discarded\n        });\n      };\n      previous_client_y = 0;\n      scope.setPosition = function($index, event) {\n        if (event.clientY !== previous_client_y) {\n          previous_client_y = event.clientY;\n          return scope.position = $index;\n        }\n      };\n      scope.getClass = function(index) {\n        var ref;\n        return {\n          'selected': isSelected((ref = scope.options) != null ? ref[index] : void 0),\n          'active': index === scope.position\n        };\n      };\n      (startListening = function() {\n        return document.addEventListener('keydown', onKeyDown);\n      })();\n      stopListening = function() {\n        return document.removeEventListener('keydown', onKeyDown);\n      };\n      return scope.$on('$destroy', stopListening);\n    }\n  };\n}]);\n\n\n/**\nSortable directive to allow drag n' drop sorting of an array.\n\n@module shift.components.sortable\n\n@requires momentJS\n@requires lodash\n\n@param {array} shiftSortable Array of sortable object\n@param {function} shiftSortableChange Called when order is changed\n@param {function} shiftSortableAdd Called when an item gets added with\nthe added item as argument (`item` keyword is mandatory)\n@param {function} shiftSortableRemove Called when an item gets removed with\nthe removed item as argument (`item` keyword is mandatory)\n@param {string} shiftSortableHandle CSS selector to grab the element (optional)\n@param {string} shiftSortableNamespace Namespace for to define multiple possible\nsource and destinations.\n\n@example\n```jade\nul(\n  shift-sortable = \"list_of_object\"\n  shift-sortable-change = \"onListOrderChange(list_of_object)\"\n  shift-sortable-handle = \".grab-icon\"\n  shift-sortable-namespace = \"bucket_list\"\n)\n  li(ng-repeat = \"element in list_of_object\") {{ element.name }}\n\nul(\n  shift-sortable = \"list_of_object_excluded\"\n  shift-sortable-add = \"onListAdd(item)\"\n  shift-sortable-remove = \"onListRemove(item)\"\n  shift-sortable-handle = \".grab-icon\"\n  shift-sortable-namespace = \"bucket_list\"\n)\n  li(ng-repeat = \"element in list_of_object_excluded\") {{ element.name }}\n```\n */\nvar indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\nangular.module('shift.components.sortable', []).service('shiftSortableService', function() {\n  var namespaces;\n  namespaces = {};\n  return {\n    register: function(namespace, container, scope) {\n      if (namespaces[namespace] == null) {\n        namespaces[namespace] = [];\n      }\n      namespaces[namespace].push({\n        container: container,\n        scope: scope\n      });\n      return namespaces[namespace];\n    }\n  };\n}).directive('shiftSortable', ['shiftSortableService', function(shiftSortableService) {\n  return {\n    restrict: 'A',\n    scope: {\n      shiftSortable: '=',\n      shiftSortableChange: '&',\n      shiftSortableAdd: '&',\n      shiftSortableRemove: '&',\n      shiftSortableHandle: '@',\n      shiftSortableNamespace: '@'\n    },\n    link: function(scope, element, attrs) {\n      var container, dragging, getElementAt, grab, hovered_element, isBefore, isInside, last_element, move, movePlaceholder, placeholder, release, sortables, start_position;\n      container = element[0];\n      dragging = null;\n      start_position = null;\n      hovered_element = null;\n      last_element = {};\n      placeholder = document.createElement('div');\n      placeholder.className = 'placeholder';\n      if (scope.shiftSortableNamespace) {\n        sortables = shiftSortableService.register(scope.shiftSortableNamespace, container, scope);\n      }\n      getElementAt = function(container, x, y) {\n        var coord, i, index, last, len, ref;\n        last = container.children[container.children.length - 1];\n        ref = container.children;\n        for (index = i = 0, len = ref.length; i < len; index = ++i) {\n          element = ref[index];\n          coord = element.getBoundingClientRect();\n          if (isInside(x, y, coord)) {\n            if (isBefore(x, y, coord)) {\n              return element;\n            } else if (element === last) {\n              return last_element;\n            } else {\n              return container.children[index + 1];\n            }\n          }\n        }\n      };\n      isBefore = function(x, y, rectange) {\n        var rel_x, rel_y;\n        y -= $(window).scrollTop();\n        x -= $(window).scrollLeft();\n        rel_x = x - rectange.left;\n        rel_y = rectange.top + rectange.height - y;\n        return rel_y > (rel_x / rectange.width) * rectange.height;\n      };\n      isInside = function(x, y, rectange) {\n        y -= $(window).scrollTop();\n        x -= $(window).scrollLeft();\n        return x > rectange.left && x < rectange.right && y > rectange.top && y < rectange.bottom;\n      };\n      grab = function(event) {\n        var target;\n        target = event.target;\n        if (scope.shiftSortableHandle != null) {\n          if (!target.matches(scope.shiftSortableHandle)) {\n            return;\n          }\n          while (target.parentNode !== container) {\n            target = target.parentNode;\n          }\n        }\n        event.preventDefault();\n        if (indexOf.call(container.children, target) >= 0) {\n          dragging = target;\n          start_position = $(dragging).index();\n          placeholder.style.width = dragging.clientWidth + \"px\";\n          placeholder.style.height = dragging.clientHeight + \"px\";\n          dragging.style.minWidth = ($(dragging).width()) + \"px\";\n          dragging.style.minHeight = ($(dragging).height()) + \"px\";\n          window.addEventListener('mousemove', move);\n          window.addEventListener('mouseup', release);\n          container.insertBefore(placeholder, dragging);\n          document.body.appendChild(dragging);\n          $(dragging).addClass('dragging');\n          move(event);\n        }\n        return false;\n      };\n      move = function(event) {\n        var i, len, results, sortable;\n        event.preventDefault();\n        dragging.style.left = (event.pageX - 10) + \"px\";\n        dragging.style.top = (event.pageY - 10) + \"px\";\n        if (scope.shiftSortableNamespace) {\n          results = [];\n          for (i = 0, len = sortables.length; i < len; i++) {\n            sortable = sortables[i];\n            results.push(movePlaceholder(sortable.container, event));\n          }\n          return results;\n        } else {\n          return movePlaceholder(container, event);\n        }\n      };\n      movePlaceholder = function(container, event) {\n        var elt;\n        if (!isInside(event.pageX, event.pageY, container.getBoundingClientRect())) {\n          return false;\n        }\n        if (container.children.length === 0) {\n          container.appendChild(placeholder);\n        } else {\n          elt = getElementAt(container, event.pageX, event.pageY);\n          if (elt != null) {\n            if (elt === last_element) {\n              container.appendChild(placeholder);\n            } else if (elt !== hovered_element) {\n              hovered_element = elt;\n              container.insertBefore(placeholder, elt);\n            }\n          }\n        }\n        return false;\n      };\n      release = function(event) {\n        var container_changed, drop_container, end_position, i, len, position_changed, record, results, sortable;\n        end_position = $(placeholder).index();\n        drop_container = placeholder.parentNode;\n        container_changed = drop_container !== container;\n        position_changed = end_position !== start_position;\n        $(dragging).removeClass('dragging');\n        if (!(container_changed || position_changed)) {\n          drop_container.insertBefore(dragging, placeholder);\n        }\n        drop_container.removeChild(placeholder);\n        dragging.style.left = placeholder.style.width = dragging.style.minWidth = '';\n        dragging.style.top = placeholder.style.height = dragging.style.minHeight = '';\n        dragging = null;\n        window.removeEventListener('mousemove', move);\n        window.removeEventListener('mouseup', release);\n        if (container_changed) {\n          record = null;\n          scope.$apply(function() {\n            record = scope.shiftSortable.splice(start_position, 1)[0];\n            scope.shiftSortableChange();\n            return scope.shiftSortableRemove({\n              item: record\n            });\n          });\n          results = [];\n          for (i = 0, len = sortables.length; i < len; i++) {\n            sortable = sortables[i];\n            if (sortable.container === drop_container) {\n              results.push(sortable.scope.$apply(function() {\n                sortable.scope.shiftSortable.splice(end_position, 0, record);\n                sortable.scope.shiftSortableChange();\n                return sortable.scope.shiftSortableAdd({\n                  item: record\n                });\n              }));\n            } else {\n              results.push(void 0);\n            }\n          }\n          return results;\n        } else if (position_changed) {\n          return scope.$apply(function() {\n            record = scope.shiftSortable.splice(start_position, 1)[0];\n            scope.shiftSortable.splice(end_position, 0, record);\n            return scope.shiftSortableChange();\n          });\n        }\n      };\n      container.addEventListener('mousedown', grab);\n      return scope.$on('$destroy', function() {\n        container.removeEventListener('mousedown', grab);\n        if (sortables) {\n          return _.remove(sortables, function(sortable) {\n            return sortable.scope === scope;\n          });\n        }\n      });\n    }\n  };\n}]);\n\n\n/**\nTooltip directive displays help text on custom action\nexecuted on the element it is attached to.\n\n@module shift.components.tooltip\n\n@param {string} shiftTooltip the text of the tooltip\n@param {string} shiftTooltipTrigger What triggers the tooltip ? click, hover\nor focus. Default to hover.\n@param {string} shiftTooltipPosition Default to 'top', can also be set to\nleft, right and top.\n@param {attribute} fixed Use fixed positioning for the the tooltip. To be set\nwhen the trigger object is also fixed positioned.\n@param {string} shiftTooltipAttachTo a CSS selector where to put the tooltip\nelement. Useful when the tooltip is appearing in a scrollable area.\n\n@example\n```jade\nspan(\n  shift-tooltip = \"lorem ipsum\"\n  shift-tooltip-trigger = \"click|hover|focus\"\n  shift-tooltip-position = \"top|bottom|left|right\"\n  shift-tooltip-attach-to = \".scrollable.classname\"\n  fixed\n) blah blah blah...\n```\n */\nangular.module('shift.components.tooltip', []).directive('shiftTooltip', ['$http', '$compile', '$templateCache', function($http, $compile, $templateCache) {\n  var template;\n  template = '<div class=\"tooltip-container\">{{ text }}</div>';\n  return {\n\n    /*\n     * Directive definition object\n     */\n    restrict: 'A',\n    scope: {\n      text: '@shiftTooltip',\n      position: '@shiftTooltipPosition',\n      trigger: '@shiftTooltipTrigger',\n      attachTo: '@shiftTooltipattachTo'\n    },\n    link: function(scope, element, attrs, controllers, transclude) {\n      var compile;\n      scope.parent_node = element[0];\n      (compile = function() {\n        var shift_floating;\n        shift_floating = angular.element('<shift-floating />');\n        shift_floating.attr({\n          parent: 'parent_node',\n          attachTo: scope.attachTo,\n          position: scope.position || 'top',\n          trigger: scope.trigger || 'hover',\n          offset: \"2\"\n        });\n        if (attrs.fixed) {\n          shift_floating.attr({\n            fixed: true\n          });\n        }\n        shift_floating.append($compile(template)(scope));\n        $('body').append($compile(shift_floating)(scope));\n        return void 0;\n      })();\n      return scope.$watch(attrs.title, function(new_value, old_value) {\n        if (new_value === old_value) {\n          return;\n        }\n        return compile();\n      });\n    }\n  };\n}]);\n\n\n/**\nTime directive displays a text input guessing the time entered.\n\n@module shift.components.time\n\n@requires momentJS\n@requires lodash\n\n@param {moment} time A moment object, default to now\nthe selected date is valid or not\n\n@example\n```jade\ninput(\n  ng-model = \"date\"\n  type = \"text\"\n  shift-time\n)\n```\n */\nvar indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\nangular.module('shift.components.time', []).directive('shiftTime', ['$timeout', function($timeout) {\n  return {\n    require: 'ngModel',\n    restrict: 'A',\n    scope: {\n      time: '=ngModel'\n    },\n    link: function(scope, element, attr, ngModel) {\n      var guessTime;\n      guessTime = function(time_str) {\n        var hour, minute, ref, time_re, time_tuple;\n        time_re = /(1[0-2]|0?[1-9])[^ap\\d]?([0-5][0-9]|[0-9])?\\s?(am|pm|a|p)?/;\n        time_tuple = time_re.exec(time_str.toLowerCase());\n        if (time_tuple) {\n          hour = time_tuple[1] && parseInt(time_tuple[1], 10) || 0;\n          minute = time_tuple[2] && parseInt(time_tuple[2], 10) || 0;\n          if ((ref = time_tuple[3]) === 'p' || ref === 'pm') {\n            if (hour < 12) {\n              hour += 12;\n            }\n          } else {\n            if (hour === 12) {\n              hour = 0;\n            }\n          }\n          return [hour, minute];\n        }\n        return [0, 0];\n      };\n      ngModel.$formatters.push(function(value) {\n        if (value) {\n          return moment(value).format('h:mm a');\n        }\n        return '';\n      });\n      ngModel.$parsers.push(function(value) {\n        var hour, minute, new_date, ref;\n        if (value) {\n          ref = guessTime(value), hour = ref[0], minute = ref[1];\n          new_date = moment(scope.time).set('hour', hour).set('minute', minute);\n          return new_date;\n        }\n        return scope.time;\n      });\n      return element.on('blur', function(event) {\n        var ref;\n        if (!(scope.time && scope.time.isValid())) {\n          return;\n        }\n        if (ref = event.target.value, indexOf.call(moment(scope.time).format('h:mm a'), ref) < 0) {\n          return $timeout(function() {\n            return scope.time = moment(scope.time);\n          });\n        }\n      });\n    }\n  };\n}]);\n\n\n/**\nTypeahead directive displaying a set of option to choose from as input changes.\n\nThe transcluded object attributes are prepend with `option.`. In the case of the\nexample, the sources are\n\n```coffee\n$scope.sources = [\n  {state: 'ca', city: 'Los Angeles', population: 3884307}\n  ...\n]\n```\n\nin the transcluded template section, you would then access the population information\nthrough `{{ option.population }}`\n\n@module shift.components.typeahead\n\n@requires shift.components.selector\n\n@param {array} sources Source of options to be filtered by the input\n@param {string} filterAttribute Name of the attribute for the filter\n@param {object} selected Object selected within the source\n@param {function} onOptionSelect Invoked when a multiselect option is selected\n@param {function} onOptionDeselect Invoked when a multiselect option is deselected\n@param {string} placeholder Placeholder text for the input\n@param {bool} show_options_on_focus Open the select menu on focus\n@param {bool} show_selectmenu\n@param {bool} close_menu_on_esc Enable closing the menu with the escape key\n@param {string} multiselect An *attribute* to toggle shift-multiselect support\n\n@example\n```jade\nshift-typeahead(\n  sources = \"list_of_object\"\n  filterAttribute = \"city\"\n  selected = \"selected_city\"\n)\n  strong {{option.city}}\n  span &nbsp; {{option.state}}\n  div\n    i pop. {{option.population}}\n\n//- with multiselect enabled:\nshift-typeahead(\n  sources = \"list_of_object\"\n  filterAttribute = \"city\"\n  selected = \"selected_cities\"\n  multiselect\n)\n  label(for=\"shift_multiselect_option_{{$index}}\") {{option.city}}\n```\n */\nangular.module('shift.components.typeahead', ['shift.components.selector']).directive('shiftTypeahead', ['$compile', '$filter', function($compile, $filter) {\n  return {\n    restrict: 'E',\n    transclude: true,\n    templateUrl: 'typeahead/typeahead.html',\n    scope: {\n      source: '=',\n      filterAttribute: '@',\n      selected: '=',\n      onOptionSelect: '&',\n      onOptionDeselect: '&',\n      placeholder: '@',\n      show_options_on_focus: '=showOptionsOnFocus',\n      show_select_menu: '=?showSelectMenu',\n      close_menu_on_esc: '=closeMenuOnEsc'\n    },\n    link: function(scope, element, attrs, ctrl, transclude) {\n      var filterOptions, mouse_down, onKeyUp, onMouseDown, select_menu, shift_select_scope, startListening, stopListening;\n      scope.options = [];\n      if (scope.show_select_menu == null) {\n        scope.show_select_menu = false;\n      }\n      scope.onSelectMultiOption = function(option) {\n        return scope.onOptionSelect({\n          option: option\n        });\n      };\n      scope.onDeselectMultiOption = function(option) {\n        return scope.onOptionDeselect({\n          option: option\n        });\n      };\n      select_menu = angular.element(document.createElement('shift-selector'));\n      element.addClass('popover active');\n      select_menu.attr({\n        'visible': 'show_select_menu && !selected',\n        'options': 'options',\n        'selected': 'selected',\n        'on-select': 'onSelect(selected)',\n        'ng-mousedown': 'mouseDown(true)',\n        'ng-mouseup': 'mouseDown(false)'\n      });\n      if (attrs.multiselect != null) {\n        select_menu.attr({\n          'multiple': 'true',\n          'on-select': 'onSelectMultiOption(selected)',\n          'on-discard': 'onDeselectMultiOption(discarded)',\n          'visible': 'show_select_menu'\n        });\n      }\n      shift_select_scope = scope.$new();\n      transclude(shift_select_scope, function(clone) {\n        return select_menu.append(clone);\n      });\n      element.append(select_menu);\n      $compile(select_menu)(shift_select_scope);\n      filterOptions = function() {\n        var filter;\n        if (scope.query) {\n          filter = {};\n          filter[scope.filterAttribute] = scope.query;\n          scope.options = $filter('filter')(scope.source, filter).slice(0, 6);\n          return scope.show_select_menu = true;\n        } else {\n          return scope.options = [];\n        }\n      };\n      mouse_down = false;\n      scope.mouseDown = function(is_down) {\n        return mouse_down = is_down;\n      };\n      scope.hide = function($event) {\n        if (!mouse_down) {\n          return scope.show_select_menu = false;\n        }\n      };\n      scope.onFocus = function($event) {\n        scope.show_select_menu = true;\n        if (scope.show_options_on_focus) {\n          if (scope.query) {\n            return filterOptions();\n          } else {\n            return scope.options = scope.source;\n          }\n        }\n      };\n      scope.onSelect = function(selected) {\n        scope.selected = selected;\n        return scope.query = selected != null ? selected[scope.filterAttribute] : void 0;\n      };\n      scope.$watch('query', function(new_value, old_value) {\n        var ref;\n        if (new_value === old_value) {\n          return;\n        }\n        if (attrs.multiselect == null) {\n          if (scope.query !== ((ref = scope.selected) != null ? ref[scope.filterAttribute] : void 0)) {\n            scope.selected = null;\n          }\n        }\n        return filterOptions();\n      });\n      onKeyUp = function(event) {\n        var key;\n        key = event.which || event.keyCode;\n        if (!scope.close_menu_on_esc) {\n          return;\n        }\n        if (key === 27 && scope.show_select_menu) {\n          event.stopPropagation();\n          return scope.$apply(function() {\n            return scope.show_select_menu = false;\n          });\n        }\n      };\n      onMouseDown = function(event) {\n        if (!scope.show_select_menu) {\n          return;\n        }\n        if (element.has(event.target).length) {\n          return;\n        }\n        scope.$apply(function() {\n          return scope.show_select_menu = false;\n        });\n      };\n      (startListening = function() {\n        document.addEventListener('keyup', onKeyUp);\n        if (attrs.multiselect != null) {\n          return document.addEventListener('mousedown', onMouseDown);\n        }\n      })();\n      stopListening = function() {\n        document.removeEventListener('keyup', onKeyUp);\n        return document.removeEventListener('mousedown', onMouseDown);\n      };\n      return scope.$on('$destroy', stopListening);\n    }\n  };\n}]);\n\n'use strict';\n\nangular.module('shift.components.typeahead').run(['$templateCache', function($templateCache) {\n\n  $templateCache.put('typeahead/typeahead.html', '<div class=\"typeahead\"><div class=\"clear-icon\"></div><div class=\"search-icon\"></div><input type=\"text\" ng-blur=\"hide($event)\" ng-focus=\"onFocus($event)\" ng-model=\"query\" placeholder=\"{{placeholder}}\"></div>');\n\n}]);"],"sourceRoot":"/source/"}