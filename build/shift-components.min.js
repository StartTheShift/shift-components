angular.module("shift.components",["shift.components.sortable"]);var indexOf=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("shift.components.sortable",[]).directive("shiftSortable",function(){return{restrict:"A",scope:{shiftSortable:"=",shiftSortableChange:"&"},link:function(e,t,n){var i,o,r,l,s,a,d,h,u,f,g;return i=t[0],o=null,g=null,s=null,u=document.createElement("div"),u.className="placeholder",r=function(e,n){var o,r,l,s;for(n-=$(window).scrollTop(),e-=$(window).scrollLeft(),s=i.children,r=0,l=s.length;l>r;r++)if(t=s[r],o=t.getBoundingClientRect(),e>o.left&&e<o.right&&n>o.top&&n<o.bottom&&!t.getAttribute("shift-sortable-still"))return t},d=function(e,t){var n;return t-=$(window).scrollTop(),e-=$(window).scrollLeft(),n=i.getBoundingClientRect(),e>n.left&&e<n.right&&t>n.top&&t<n.bottom},a=function(e,t){var n,o,r;return t-=$(window).scrollTop(),e-=$(window).scrollLeft(),n=i.children[i.children.length-1].getBoundingClientRect(),o=.5*(n.right-n.left),r=.5*(n.bottom-n.top),e>n.right-o&&t>n.top||e>n.left&&t>n.bottom-r},l=function(e){var t;return e.preventDefault(),t=e.target,indexOf.call(i.children,t)>=0&&!e.target.getAttribute("shift-sortable-still")&&(o=e.target,g=$(o).index(),u.style.width=o.clientWidth+"px",u.style.height=o.clientHeight+"px",o.style.minWidth=$(o).width()+"px",o.style.minHeight=$(o).height()+"px",window.addEventListener("mousemove",h),window.addEventListener("mouseup",f),i.insertBefore(u,o),document.body.appendChild(o),$(o).addClass("dragging"),h(e)),!1},h=function(e){var t;return e.preventDefault(),o.style.left=e.pageX-10+"px",o.style.top=e.pageY-10+"px",d(e.pageX,e.pageY)?(a(e.pageX,e.pageY)?i.appendChild(u):(t=r(e.pageX,e.pageY),null!=t&&t!==s&&(s=t,i.insertBefore(u,t))),!1):!1},f=function(t){var n;return n=$(u).index(),$(o).removeClass("dragging"),i.insertBefore(o,u),i.removeChild(u),o.style.left=u.style.width=o.style.minWidth="",o.style.top=u.style.height=o.style.minHeight="",o=null,window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",f),n!==g?e.$apply(function(){var t;return t=e.shiftSortable.splice(g,1)[0],e.shiftSortable.splice(n,0,t),"function"==typeof e.shiftSortableChange?e.shiftSortableChange():void 0}):void 0},i.addEventListener("mousedown",l)}}});
//# sourceMappingURL=shift-components.min.js.map