var indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("shift.components.sortable",[]).directive("shiftSortable",function(){return{restrict:"A",scope:{shiftSortable:"=",shiftSortableChange:"&",shiftSortableFixed:"="},link:function(e,t,i){var n,r,l,o,s,a,d,h,f,u,g;return n=t[0],r=null,g=null,s=null,f=document.createElement("div"),f.className="placeholder",l=function(i,r){var l,o,s,a;for(e.shiftSortableFixed&&(r-=$(window).scrollTop(),i-=$(window).scrollLeft()),a=n.children,o=0,s=a.length;s>o;o++)if(t=a[o],l=t.getBoundingClientRect(),i>l.left&&i<l.right&&r>l.top&&r<l.bottom&&!t.getAttribute("shift-sortable-still"))return t},d=function(t,i){var r;return e.shiftSortableFixed&&(i-=$(window).scrollTop(),t-=$(window).scrollLeft()),r=n.getBoundingClientRect(),t>r.left&&t<r.right&&i>r.top&&i<r.bottom},a=function(t,i){var r,l,o;return e.shiftSortableFixed&&(i-=$(window).scrollTop(),t-=$(window).scrollLeft()),r=n.children[n.children.length-1].getBoundingClientRect(),l=.5*(r.right-r.left),o=.5*(r.bottom-r.top),t>r.right-l&&i>r.top||t>r.left&&i>r.bottom-o},o=function(e){var t;return e.preventDefault(),t=e.target,indexOf.call(n.children,t)>=0&&!e.target.getAttribute("shift-sortable-still")&&(r=e.target,g=$(r).index(),f.style.width=r.style.width=r.clientWidth+"px",f.style.height=r.style.height=r.clientHeight+"px",window.addEventListener("mousemove",h),window.addEventListener("mouseup",u),n.insertBefore(f,r),document.body.appendChild(r),$(r).addClass("dragging"),h(e)),!1},h=function(e){var t;return e.preventDefault(),r.style.left=e.pageX+"px",r.style.top=e.pageY+"px",d(e.pageX,e.pageY)?(a(e.pageX,e.pageY)?n.appendChild(f):(t=l(e.pageX,e.pageY),null!=t&&t!==s&&(s=t,n.insertBefore(f,t))),!1):!1},u=function(t){var i;return i=$(f).index(),$(r).removeClass("dragging"),n.insertBefore(r,f),n.removeChild(f),r.style.left=f.style.width=r.style.width="",r.style.top=f.style.height=r.style.height="",r=null,window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",u),i!==g?e.$apply(function(){var t;return t=e.shiftSortable.splice(g,1)[0],e.shiftSortable.splice(i,0,t),"function"==typeof e.shiftSortableChange?e.shiftSortableChange():void 0}):void 0},n.addEventListener("mousedown",o)}}});
//# sourceMappingURL=shift-components.min.js.map