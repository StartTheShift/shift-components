angular.module("shift.components",["shift.components.sortable","shift.components.calendar"]),angular.module("shift.components.calendar",[]).directive("shiftCalendar",[function(){return{restrict:"E",templateUrl:"calendar/calendar.html",scope:{date:"=",dateChange:"&"},link:function(t){var e;return moment.isMoment(t.date)||(t.date=moment()),t.goToNextMonth=function(){return t.date.add(1,"month"),e()},t.goToPreviousMonth=function(){return t.date.subtract(1,"month"),e()},t.selectDate=function(n){var o;return n.preventDefault(),o=event.target.getAttribute("data-iso"),null!=o?(t.date=moment(o),e(),"function"==typeof dateChange?dateChange():void 0):void 0},(e=function(){var e,n,o,a,i;for(t.weeks=[],e=moment(t.date).startOf("month").startOf("week"),a=moment(t.date).endOf("month").endOf("week"),t.weeks=[];a>e;)o=e.day(),n=e.date(),0===o&&(i=[],t.weeks.push(i)),i.push({iso_8061:e.format(),day_of_the_month:n,is_off:t.date.month()!==e.month(),is_active:e.format("YYYY-MM-DD")===t.date.format("YYYY-MM-DD")}),e.add(1,"day");return void 0})()}}}]),angular.module("shift.components.calendar").run(["$templateCache",function(t){t.put("calendar/calendar.html",'<div class="calendar"><table class="table-condensed"><thead><tr><th ng-click="goToPreviousMonth()"><i class="fa fa-arrow-left"></i></th><th colspan="5" class="month">{{ date.format(\'MMM Do, YY\') }}</th><th ng-click="goToNextMonth()"><i class="fa fa-arrow-right"></i></th></tr><tr><th>Su</th><th>Mo</th><th>Tu</th><th>We</th><th>Th</th><th>Fr</th><th>Sa</th></tr></thead><tbody ng-click="selectDate($event)"><tr ng-repeat="week in weeks track by $index"><td ng-repeat="day in week track by $index" ng-class="{active: day.is_active, off: day.is_off }" data-iso="{{ day.iso_8061 }}" class="available">{{ day.day_of_the_month }}</td></tr></tbody></table></div>')}]);var indexOf=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};angular.module("shift.components.sortable",[]).directive("shiftSortable",function(){return{restrict:"A",scope:{shiftSortable:"=",shiftSortableChange:"&"},link:function(t,e,n){var o,a,i,r,l,d,s,h,c,f,u;return o=e[0],a=null,u=null,l=null,c=document.createElement("div"),c.className="placeholder",i=function(t,n){var a,i,r,l;for(n-=$(window).scrollTop(),t-=$(window).scrollLeft(),l=o.children,i=0,r=l.length;r>i;i++)if(e=l[i],a=e.getBoundingClientRect(),t>a.left&&t<a.right&&n>a.top&&n<a.bottom&&!e.getAttribute("shift-sortable-still"))return e},s=function(t,e){var n;return e-=$(window).scrollTop(),t-=$(window).scrollLeft(),n=o.getBoundingClientRect(),t>n.left&&t<n.right&&e>n.top&&e<n.bottom},d=function(t,e){var n,a,i;return e-=$(window).scrollTop(),t-=$(window).scrollLeft(),n=o.children[o.children.length-1].getBoundingClientRect(),a=.5*(n.right-n.left),i=.5*(n.bottom-n.top),t>n.right-a&&e>n.top||t>n.left&&e>n.bottom-i},r=function(t){var e;return t.preventDefault(),e=t.target,indexOf.call(o.children,e)>=0&&!t.target.getAttribute("shift-sortable-still")&&(a=t.target,u=$(a).index(),c.style.width=a.clientWidth+"px",c.style.height=a.clientHeight+"px",a.style.minWidth=$(a).width()+"px",a.style.minHeight=$(a).height()+"px",window.addEventListener("mousemove",h),window.addEventListener("mouseup",f),o.insertBefore(c,a),document.body.appendChild(a),$(a).addClass("dragging"),h(t)),!1},h=function(t){var e;return t.preventDefault(),a.style.left=t.pageX-10+"px",a.style.top=t.pageY-10+"px",s(t.pageX,t.pageY)?(d(t.pageX,t.pageY)?o.appendChild(c):(e=i(t.pageX,t.pageY),null!=e&&e!==l&&(l=e,o.insertBefore(c,e))),!1):!1},f=function(e){var n;return n=$(c).index(),$(a).removeClass("dragging"),o.insertBefore(a,c),o.removeChild(c),a.style.left=c.style.width=a.style.minWidth="",a.style.top=c.style.height=a.style.minHeight="",a=null,window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",f),n!==u?t.$apply(function(){var e;return e=t.shiftSortable.splice(u,1)[0],t.shiftSortable.splice(n,0,e),"function"==typeof t.shiftSortableChange?t.shiftSortableChange():void 0}):void 0},o.addEventListener("mousedown",r)}}});
//# sourceMappingURL=shift-components.min.js.map