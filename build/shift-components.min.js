angular.module("shift.components",["shift.components.sortable"]);var indexOf=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("shift.components.sortable",[]).directive("shiftSortable",function(){return{restrict:"A",scope:{shiftSortable:"=",shiftSortableChange:"&",shiftSortableFixed:"="},link:function(e,t,n){var o,r,i,l,a,s,d,f,u,c,g;return o=t[0],r=null,g=null,a=null,u=document.createElement("div"),u.className="placeholder",i=function(n,r){var i,l,a,s;for(e.shiftSortableFixed&&(r-=$(window).scrollTop(),n-=$(window).scrollLeft()),s=o.children,l=0,a=s.length;a>l;l++)if(t=s[l],i=t.getBoundingClientRect(),n>i.left&&n<i.right&&r>i.top&&r<i.bottom&&!t.getAttribute("shift-sortable-still"))return t},d=function(t,n){var r;return e.shiftSortableFixed&&(n-=$(window).scrollTop(),t-=$(window).scrollLeft()),r=o.getBoundingClientRect(),t>r.left&&t<r.right&&n>r.top&&n<r.bottom},s=function(t,n){var r,i,l;return e.shiftSortableFixed&&(n-=$(window).scrollTop(),t-=$(window).scrollLeft()),r=o.children[o.children.length-1].getBoundingClientRect(),i=.5*(r.right-r.left),l=.5*(r.bottom-r.top),t>r.right-i&&n>r.top||t>r.left&&n>r.bottom-l},l=function(e){var t;return e.preventDefault(),t=e.target,indexOf.call(o.children,t)>=0&&!e.target.getAttribute("shift-sortable-still")&&(r=e.target,g=$(r).index(),window.addEventListener("mousemove",f),window.addEventListener("mouseup",c),o.insertBefore(u,r),document.body.appendChild(r),$(r).addClass("dragging")),!1},f=function(e){var t;return e.preventDefault(),r.style.left=e.pageX+"px",r.style.top=e.pageY+"px",d(e.pageX,e.pageY)?(s(e.pageX,e.pageY)?o.appendChild(u):(t=i(e.pageX,e.pageY),null!=t&&t!==a&&(a=t,o.insertBefore(u,t))),!1):!1},c=function(t){var n;return n=$(u).index(),$(r).removeClass("dragging"),o.insertBefore(r,u),o.removeChild(u),r.style.left="",r.style.top="",r=null,window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",c),n!==g?e.$apply(function(){var t;return t=e.shiftSortable.splice(g,1)[0],e.shiftSortable.splice(n,0,t),"function"==typeof e.shiftSortableChange?e.shiftSortableChange():void 0}):void 0},o.addEventListener("mousedown",l)}}});
//# sourceMappingURL=shift-components.min.js.map