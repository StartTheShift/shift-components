angular.module("shift.components",["shift.components.sortable"]);var indexOf=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("shift.components.sortable",[]).directive("shiftSortable",function(){return{restrict:"A",scope:{shiftSortable:"=",shiftSortableChange:"&",shiftSortableFixed:"="},link:function(e,t,n){var i,o,r,l,s,a,d,h,f,u,g;return i=t[0],o=null,g=null,s=null,f=document.createElement("div"),f.className="placeholder",r=function(n,o){var r,l,s,a;for(e.shiftSortableFixed&&(o-=$(window).scrollTop(),n-=$(window).scrollLeft()),a=i.children,l=0,s=a.length;s>l;l++)if(t=a[l],r=t.getBoundingClientRect(),n>r.left&&n<r.right&&o>r.top&&o<r.bottom&&!t.getAttribute("shift-sortable-still"))return t},d=function(t,n){var o;return e.shiftSortableFixed&&(n-=$(window).scrollTop(),t-=$(window).scrollLeft()),o=i.getBoundingClientRect(),t>o.left&&t<o.right&&n>o.top&&n<o.bottom},a=function(t,n){var o,r,l;return e.shiftSortableFixed&&(n-=$(window).scrollTop(),t-=$(window).scrollLeft()),o=i.children[i.children.length-1].getBoundingClientRect(),r=.5*(o.right-o.left),l=.5*(o.bottom-o.top),t>o.right-r&&n>o.top||t>o.left&&n>o.bottom-l},l=function(e){var t;return e.preventDefault(),t=e.target,indexOf.call(i.children,t)>=0&&!e.target.getAttribute("shift-sortable-still")&&(o=e.target,g=$(o).index(),f.style.width=o.style.width=o.clientWidth+"px",f.style.height=o.style.height=o.clientHeight+"px",window.addEventListener("mousemove",h),window.addEventListener("mouseup",u),i.insertBefore(f,o),document.body.appendChild(o),$(o).addClass("dragging"),h(e)),!1},h=function(e){var t;return e.preventDefault(),o.style.left=e.pageX+"px",o.style.top=e.pageY+"px",d(e.pageX,e.pageY)?(a(e.pageX,e.pageY)?i.appendChild(f):(t=r(e.pageX,e.pageY),null!=t&&t!==s&&(s=t,i.insertBefore(f,t))),!1):!1},u=function(t){var n;return n=$(f).index(),$(o).removeClass("dragging"),i.insertBefore(o,f),i.removeChild(f),o.style.left=f.style.width=o.style.width="",o.style.top=f.style.height=o.style.height="",o=null,window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",u),n!==g?e.$apply(function(){var t;return t=e.shiftSortable.splice(g,1)[0],e.shiftSortable.splice(n,0,t),"function"==typeof e.shiftSortableChange?e.shiftSortableChange():void 0}):void 0},i.addEventListener("mousedown",l)}}});
//# sourceMappingURL=shift-components.min.js.map