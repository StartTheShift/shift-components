angular.module("shift.components",["sortable"]);var indexOf=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("shift.components.sortable",[]).directive("shiftSortable",function(){return{restrict:"A",scope:{shiftSortable:"=",shiftSortableChange:"&",shiftSortableFixed:"="},link:function(e,t,n){var r,o,i,l,a,s,d,f,u,c,g;return r=t[0],o=null,g=null,a=null,u=document.createElement("div"),u.className="placeholder",i=function(n,o){var i,l,a,s;for(e.shiftSortableFixed&&(o-=$(window).scrollTop(),n-=$(window).scrollLeft()),s=r.children,l=0,a=s.length;a>l;l++)if(t=s[l],i=t.getBoundingClientRect(),n>i.left&&n<i.right&&o>i.top&&o<i.bottom&&!t.getAttribute("shift-sortable-still"))return t},d=function(t,n){var o;return e.shiftSortableFixed&&(n-=$(window).scrollTop(),t-=$(window).scrollLeft()),o=r.getBoundingClientRect(),t>o.left&&t<o.right&&n>o.top&&n<o.bottom},s=function(t,n){var o,i,l;return e.shiftSortableFixed&&(n-=$(window).scrollTop(),t-=$(window).scrollLeft()),o=r.children[r.children.length-1].getBoundingClientRect(),i=.5*(o.right-o.left),l=.5*(o.bottom-o.top),t>o.right-i&&n>o.top||t>o.left&&n>o.bottom-l},l=function(e){var t;return e.preventDefault(),t=e.target,indexOf.call(r.children,t)>=0&&!e.target.getAttribute("shift-sortable-still")&&(o=e.target,g=$(o).index(),window.addEventListener("mousemove",f),window.addEventListener("mouseup",c),r.insertBefore(u,o),document.body.appendChild(o),$(o).addClass("dragging")),!1},f=function(e){var t;return e.preventDefault(),o.style.left=e.pageX+"px",o.style.top=e.pageY+"px",d(e.pageX,e.pageY)?(s(e.pageX,e.pageY)?r.appendChild(u):(t=i(e.pageX,e.pageY),null!=t&&t!==a&&(a=t,r.insertBefore(u,t))),!1):!1},c=function(t){var n;return n=$(u).index(),$(o).removeClass("dragging"),r.insertBefore(o,u),r.removeChild(u),o.style.left="",o.style.top="",o=null,window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",c),n!==g?e.$apply(function(){var t;return t=e.shiftSortable.splice(g,1)[0],e.shiftSortable.splice(n,0,t),"function"==typeof e.shiftSortableChange?e.shiftSortableChange():void 0}):void 0},r.addEventListener("mousedown",l)}}});
//# sourceMappingURL=shift-components.min.js.map