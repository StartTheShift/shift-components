angular.module("shift.components",["shift.components.sortable","shift.components.calendar","shift.components.select"]),angular.module("shift.components.autocomplete",[]).directive("shiftAutocomplete",[function(){return{restrict:"E",scope:{source:"=",query:"="},link:function(t){return void 0}}}]),angular.module("shift.components.calendar",[]).directive("shiftCalendar",[function(){return{restrict:"E",templateUrl:"calendar/calendar.html",scope:{date:"=",dateChange:"&",dateValidator:"=",dateHightlight:"=",dateAllowNull:"="},link:function(t){var e,n,i;return t.goToNextMonth=function(){return t.showing_date.add(1,"month"),e()},t.goToPreviousMonth=function(){return t.showing_date.subtract(1,"month"),e()},t.goToSelectedDate=function(){return t.showing_date=moment(t.date),e()},t.selectDate=function(t){return i(moment(t.target.getAttribute("data-iso")))},t.setNull=function(){return t.dateAllowNull?(t.date=null,e(),t.dateChange()):void 0},n=function(e){return moment.isMoment(e)&&e.isValid()?null!=t.dateValidator?t.dateValidator(e):!0:!1},i=function(i){return n(i)?(t.date=i,t.showing_date=moment(i),e(),t.dateChange()):void 0},t.$watch("date",function(t,e){return t!==e?i(t):void 0}),t.getClass=function(e){var i;return{active:null!=(i=t.date)?i.isSame(e,"day"):void 0,off:!t.showing_date.isSame(e,"month"),available:n(e),invalid:!n(e),highlight:"function"==typeof t.dateHightlight?t.dateHightlight(e):void 0}},(e=function(){var e,n,i,o,a,l;for(e=moment(t.showing_date).startOf("month").startOf("week"),o=moment(t.showing_date).endOf("month").endOf("week"),t.weeks=[],a=[];;){if(i=e.day(),n=e.date(),0===i){if(t.weeks.length>5)break;l=[],t.weeks.push(l)}l.push({iso_8061:e.format(),day_of_the_month:n,date:moment(e)}),a.push(e.add(1,"day"))}return a})(),t.dateAllowNull||moment.isMoment(t.date)||(t.date=moment()),moment.isMoment(t.date)?(i(t.date),t.showing_date=moment(t.date)):t.showing_date=moment().startOf("day")}}}]),angular.module("shift.components.calendar").run(["$templateCache",function(t){t.put("calendar/calendar.html",'<div class="calendar"><table class="table-condensed"><thead><tr><th title="previous month" ng-click="goToPreviousMonth()"><i class="fa fa-chevron-left"></i></th><th><i ng-if="date" title="go to {{ date.format(\'MMMM Do, YYYY\') }}" ng-hide="showing_date.isSame(date, \'month\')" ng-click="goToSelectedDate()" class="fa fa-dot-circle-o"></i></th><th colspan="3" class="month">{{ showing_date.format(\'MMM YYYY\') }}</th><th><i title="Unset date" ng-click="setNull()" ng-if="date &amp;&amp; dateAllowNull" class="fa fa-times"></i></th><th title="next month" ng-click="goToNextMonth()"><i class="fa fa-chevron-right"></i></th></tr><tr><th>Su</th><th>Mo</th><th>Tu</th><th>We</th><th>Th</th><th>Fr</th><th>Sa</th></tr></thead><tbody ng-click="selectDate($event)"><tr ng-repeat="week in weeks track by $index"><td ng-repeat="day in week track by $index" ng-class="getClass(day.date)" data-iso="{{ day.iso_8061 }}">{{ day.day_of_the_month }}</td></tr></tbody></table></div>')}]);var indexOf=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};angular.module("shift.components.sortable",[]).directive("shiftSortable",function(){return{restrict:"A",scope:{shiftSortable:"=",shiftSortableChange:"&",shiftSortableHandle:"@"},link:function(t,e,n){var i,o,a,l,r,s,d,c,h,u,f,m;return i=e[0],o=null,m=null,r=null,c={},u=document.createElement("div"),u.className="placeholder",a=function(t,n){var o,a,l,r,h,u;for(r=i.children[i.children.length-1],u=i.children,l=a=0,h=u.length;h>a;l=++a)if(e=u[l],o=e.getBoundingClientRect(),d(t,n,o))return s(t,n,o)?e:e===r?c:i.children[l+1]},s=function(t,e,n){var i,o;return e-=$(window).scrollTop(),t-=$(window).scrollLeft(),i=t-n.left,o=n.top+n.height-e,o>i/n.width*n.height},d=function(t,e,n){return e-=$(window).scrollTop(),t-=$(window).scrollLeft(),t>n.left&&t<n.right&&e>n.top&&e<n.bottom},l=function(e){var n;if(e.preventDefault(),n=e.target,null!=t.shiftSortableHandle){if(!n.matches(t.shiftSortableHandle))return;for(;n.parentElement!==i;)n=n.parentElement}return indexOf.call(i.children,n)>=0&&(o=n,m=$(o).index(),u.style.width=o.clientWidth+"px",u.style.height=o.clientHeight+"px",o.style.minWidth=$(o).width()+"px",o.style.minHeight=$(o).height()+"px",window.addEventListener("mousemove",h),window.addEventListener("mouseup",f),i.insertBefore(u,o),document.body.appendChild(o),$(o).addClass("dragging"),h(e)),!1},h=function(t){var e;return t.preventDefault(),o.style.left=t.pageX-10+"px",o.style.top=t.pageY-10+"px",d(t.pageX,t.pageY,i.getBoundingClientRect())?(e=a(t.pageX,t.pageY),null!=e&&(e===c?i.appendChild(u):e!==r&&(r=e,i.insertBefore(u,e))),!1):!1},f=function(e){var n;return n=$(u).index(),$(o).removeClass("dragging"),i.insertBefore(o,u),i.removeChild(u),o.style.left=u.style.width=o.style.minWidth="",o.style.top=u.style.height=o.style.minHeight="",o=null,window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",f),n!==m?t.$apply(function(){var e;return e=t.shiftSortable.splice(m,1)[0],t.shiftSortable.splice(n,0,e),t.shiftSortableChange()}):void 0},i.addEventListener("mousedown",l)}}});var hasProp={}.hasOwnProperty;angular.module("shift.components.select",[]).directive("shiftSelect",["$compile","$filter","$timeout",function(t,e,n){return{restrict:"E",templateUrl:"select/select.html",scope:{template:"@",options:"=",filter:"=",selected:"=",onSelect:"&"},link:function(t,n){var i,o,a,l,r,s,d;return a=38,i=40,o=13,t.position=-1,t.display=function(t){return t.city},t.$watch("filter",function(e,n){return e!==n?(t.position=-1,l()):void 0},!0),(l=function(){return t.filtered_options=e("filter")(t.options,t.filter)})(),r=function(e){var n;if(t.filtered_options.length&&(n=e.which||e.keyCode,n===a||n===i||n===o)){switch(n){case a:t.position-=1;break;case i:t.position+=1;break;default:t.position>-1&&t.select(t.position)}return t.position=Math.max(0,t.position),t.position=Math.min(t.filtered_options.length-1,t.position),t.$apply(),e.preventDefault(),e.stopPropagation(),!1}},t.select=function(e){var n,i;t.position=e,t.selected=t.filtered_options[t.position],i=t.filter;for(n in i)hasProp.call(i,n)&&(t.filter[n]=t.selected[n]);return t.onSelect()},t.getClass=function(e){return{selected:e===t.position}},(s=function(){return document.addEventListener("keydown",r)})(),d=function(){return document.removeEventListener("keydown",r)},void t.$on("$destroy",d)}}}]),angular.module("shift.components.select").run(["$templateCache",function(t){t.put("select/select.html",'<div ng-if="filtered_options.length" class="select-container"><div ng-repeat="option in filtered_options" ng-class="getClass($index)" ng-click="select($index)" class="select-option">{{ display(option) }}</div></div>')}]);
//# sourceMappingURL=shift-components.min.js.map